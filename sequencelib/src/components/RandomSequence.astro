---
import { result } from "./lean_info";
import { LinkButton } from '@astrojs/starlight/components';

const { class: className } = Astro.props;
---

<LinkButton class={className} id="random" href="" data-result={JSON.stringify(result.ids)}>
    Random Sequence
</LinkButton>

<script>
    const button = document.querySelector('#random');
    button?.addEventListener('click', (event) => { 
        event.preventDefault();
        const values = JSON.parse((button as HTMLElement).dataset.result!);
        const random_sequence = values[Math.floor(Math.random() * values.length)];
        const random_id = `A${random_sequence.toString().padStart(6, "0")}`;
        const link = `/${random_id.slice(0, 4)}/${random_id}`;
        window.location.href = link;
    });
</script>